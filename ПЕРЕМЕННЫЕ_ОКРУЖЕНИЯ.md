# üîê –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø –î–õ–Ø PRODUCTION

## üìã –î–õ–Ø RAILWAY (Backend - mark-service)

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
DATABASE_URL=${{Postgres.DATABASE_URL}}
REDIS_URL=${{Redis.REDIS_URL}}

# JWT —Å–µ–∫—Ä–µ—Ç (–í–ê–ñ–ù–û!)
JWT_SECRET=2ce6fd64a8cdb04eaf3f52936a701869e0e28947c88317db008968baa60201f9

# Node –æ–∫—Ä—É–∂–µ–Ω–∏–µ
NODE_ENV=production

# CORS (–¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à Vercel URL –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è!)
CORS_ORIGINS=https://znak-lavki.vercel.app
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# MinIO (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è QR-–∫–æ–¥–æ–≤)
MINIO_ENDPOINT=your-minio-url.com
MINIO_PORT=9000
MINIO_ACCESS_KEY=your-access-key
MINIO_SECRET_KEY=your-secret-key
MINIO_BUCKET=quality-marks
MINIO_USE_SSL=true

# –ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö API
HONEST_SIGN_API_URL=https://api.—á–µ—Å—Ç–Ω—ã–π–∑–Ω–∞–∫.—Ä—Ñ
HONEST_SIGN_TOKEN=your-token
```

---

## üìã –î–õ–Ø VERCEL (Frontend - admin-panel)

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# Backend API (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Railway URL!)
VITE_API_URL=https://mark-service-production-xxxx.up.railway.app

# Node –æ–∫—Ä—É–∂–µ–Ω–∏–µ
NODE_ENV=production
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# WebSocket
VITE_WS_URL=wss://mark-service-production-xxxx.up.railway.app
```

---

## üîë –í–ê–® JWT_SECRET

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á –¥–ª—è Railway:**

```
JWT_SECRET=2ce6fd64a8cdb04eaf3f52936a701869e0e28947c88317db008968baa60201f9
```

**–ò–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π:**

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

---

## üìù –ö–ê–ö –î–û–ë–ê–í–ò–¢–¨ –í RAILWAY

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Railway
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å `mark-service`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É `Variables`
4. –ù–∞–∂–º–∏—Ç–µ `+ New Variable`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–µ–∫—Ü–∏–∏ "–î–õ–Ø RAILWAY" –≤—ã—à–µ
6. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç —Å–µ—Ä–≤–∏—Å

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è frontend –Ω–∞ Vercel, –æ–±–Ω–æ–≤–∏—Ç–µ `CORS_ORIGINS`!

---

## üìù –ö–ê–ö –î–û–ë–ê–í–ò–¢–¨ –í VERCEL

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Vercel
2. `Settings` ‚Üí `Environment Variables`
3. –ù–∞–∂–º–∏—Ç–µ `Add New`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–µ–∫—Ü–∏–∏ "–î–õ–Ø VERCEL" –≤—ã—à–µ
5. **–ó–∞–º–µ–Ω–∏—Ç–µ** `VITE_API_URL` –Ω–∞ –≤–∞—à Railway URL
6. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ù–ê–°–¢–†–û–ï–ö

### Backend (Railway):

```bash
# Health check
curl https://your-app.up.railway.app/api/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
{"status":"ok","timestamp":"...","uptime":123.45}
```

### Frontend (Vercel):

```bash
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl https://znak-lavki.vercel.app

# –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

### CORS:

```bash
curl -H "Origin: https://znak-lavki.vercel.app" \
     -H "Access-Control-Request-Method: GET" \
     -X OPTIONS \
     https://your-app.up.railway.app/api/marks

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200 OK —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ CORS
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- [ ] JWT_SECRET –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- [ ] JWT_SECRET —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] NODE_ENV=production
- [ ] HTTPS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
- [ ] CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º
- [ ] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –∫–æ–¥–µ (—Ç–æ–ª—å–∫–æ –≤ env variables)
- [ ] Database credentials –Ω–µ –≤ Git
- [ ] API tokens –Ω–µ –≤ –∫–æ–¥–µ

### ‚ö†Ô∏è –ù–ï –î–ï–õ–ê–ô–¢–ï:

- ‚ùå –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Git
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è dev/prod
- ‚ùå –ù–ï –¥–µ–ª–∏—Ç–µ—Å—å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –ø—É–±–ª–∏—á–Ω–æ
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∞–±—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (< 32 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ùå –ù–ï –æ—Ç–∫–ª—é—á–∞–π—Ç–µ CORS –≤ production

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–•

### Railway:

1. Dashboard ‚Üí mark-service ‚Üí Variables
2. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç ‚úÖ

### Vercel:

1. Settings ‚Üí Environment Variables
2. –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. Deployments ‚Üí ... ‚Üí Redeploy ‚úÖ

---

## üåê –ü–†–ò–ú–ï–† –î–õ–Ø CUSTOM –î–û–ú–ï–ù–ê

–ï—Å–ª–∏ —É –≤–∞—Å —Å–≤–æ–π –¥–æ–º–µ–Ω:

### Railway (Backend):

```env
CORS_ORIGINS=https://admin.your-domain.com,https://your-domain.com
```

### Vercel (Frontend):

```env
VITE_API_URL=https://api.your-domain.com
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS:

```
# –î–ª—è backend (Railway)
Type: CNAME
Name: api
Value: your-app.up.railway.app

# –î–ª—è frontend (Vercel)
Type: CNAME
Name: admin
Value: cname.vercel-dns.com
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤:

```bash
# JWT_SECRET (32+ —Å–∏–º–≤–æ–ª–æ–≤)
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# –°–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–æ–ª—å (16 —Å–∏–º–≤–æ–ª–æ–≤)
node -e "console.log(require('crypto').randomBytes(16).toString('base64'))"

# UUID
node -e "console.log(require('crypto').randomUUID())"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```bash
# –í Railway
railway variables

# –í Vercel CLI
vercel env ls
```

---

## ‚ùì –í–û–ó–ù–ò–ö–õ–ò –ü–†–û–ë–õ–ï–ú–´?

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `JWT_SECRET` (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)

### Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VITE_API_URL` –≤ Vercel
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `CORS_ORIGINS` –≤ Railway
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–∞ URL —Å–æ–≤–ø–∞–¥–∞—é—Ç

### CORS –æ—à–∏–±–∫–∏:

- –î–æ–±–∞–≤—å—Ç–µ Vercel URL –≤ `CORS_ORIGINS`
- –§–æ—Ä–º–∞—Ç: –±–µ–∑ —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: –∑–∞–ø—è—Ç–∞—è

---

**–°–æ–∑–¥–∞–Ω–æ:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:** –ó–Ω–∞–∫ –õ–∞–≤–∫–∏  
**–°—Ç–∞—Ç—É—Å:** Production-ready ‚úÖ

